const replaceDisc = {
  AUSPEX: "A",
  OBEAH: "B",
  CELERITY: "C",
  DOMINATE: "D",
  DEMENTATION: "E",
  FORTITUDE: "F",
  SANGUINUS: "G",
  THANATOSIS: "H",
  ANIMALISM: "I",
  PROTEAN: "J",
  CHIMESTRY: "K",
  VALEREN: "L",
  MELPOMINEE: "M",
  NECROMANCY: "N",
  OBFUSCATE: "O",
  POTENCE: "P",
  QUIETUS: "Q",
  PRESENCE: "R",
  SERPENTIS: "S",
  BLOOD_SORCERY: "T",
  THAUMATURGY: "T",
  VISCERATIKA: "U",
  VICISSITUDE: "V",
  ABOMBWE: "W",
  MYTHERCERIA: "X",
  DAIMOINON: "Y",
  SPIRITUS: "Z",
  TEMPORIS: "!",
  OBTENEBRATION: "£",
  STRIGA: "=",
  MALEFICIA: ">",
  auspex: "a",
  obeah: "c",
  celerity: "c",
  dominate: "d",
  dementation: "e",
  fortitude: "f",
  sanguinus: "g",
  thanatosis: "h",
  animalism: "i",
  protean: "j",
  chimestry: "k",
  valeren: "l",
  melpominee: "m",
  necromancy: "n",
  obfuscate: "o",
  potence: "p",
  quietus: "q",
  presence: "r",
  serpentis: "s",
  blood_sorcery: "t",
  thaumaturgy: "t",
  visceratika: "u",
  vicissitude: "v",
  abombwe: "w",
  mytherceria: "x",
  daimoinon: "y",
  spiritus: "z",
  temporis: "?",
  obtenebration: "$",
  striga: "+",
  maleficia: "\\<",
  AUS: "A",
  OBE: "C",
  CEL: "c",
  DOM: "D",
  DEM: "E",
  FOR: "F",
  SAN: "G",
  THA: "H",
  ANI: "I",
  PRO: "J",
  CHI: "K",
  VAL: "L",
  MEL: "M",
  NEC: "N",
  OBF: "O",
  POT: "P",
  QUI: "Q",
  PRE: "R",
  SER: "S",
  BLO: "T",
  THA: "T",
  VIS: "U",
  VIC: "V",
  ABO: "W",
  MYT: "X",
  DAI: "Y",
  SPI: "Z",
  TEM: "!",
  OBT: "£",
  STR: "=",
  MAL: ">",
  aus: "a",
  obe: "b",
  cel: "c",
  dom: "d",
  dem: "e",
  for: "f",
  san: "g",
  tha: "h",
  ani: "i",
  pro: "j",
  chi: "k",
  val: "l",
  mel: "m",
  nec: "n",
  obf: "o",
  pot: "p",
  qui: "q",
  pre: "r",
  ser: "s",
  blo: "t",
  tha: "t",
  vis: "u",
  vic: "v",
  abo: "w",
  myt: "x",
  dai: "y",
  spi: "z",
  tem: "?",
  obt: "$",
  str: "+",
  mal: "\\<",
};

const replaceClan = {
  pander: "a",
  ravnosold: "b",
  ravnos_old: "b",
  ravnoslegacy: "b",
  ravnos_legacy: "b",
  salubri: "c",
  "!salubri": "d",
  samedi: "e",
  toreadorold: "f",
  toreador_old: "f",
  toreadorlegacy: "f",
  toreador_legacy: "f",
  "!toreador": "g",
  tremereold: "h",
  tremere_old: "h",
  tremerelegacy: "h",
  tremere_legacy: "h",
  "!tremere": "i",
  true_brujah: "j",
  truebrujah: "j",
  tzimisce: "k",
  ventrueold: "l",
  ventrue_old: "l",
  ventruelegacy: "l",
  ventrue_legacy: "l",
  "!ventrue": "m",
  banu_haqim: "n",
  banuhaqim: "n",
  assamite: "n",
  brujah: "o",
  gangrel: "p",
  malkavian: "q",
  ministry: "r",
  set: "r",
  followers_of_set: "r",
  followersofset: "r",
  nosferatu: "s",
  toreador: "t",
  tremere: "u",
  ventrue: "v",
  lasombra: "w",
  la_sombra: "w",
  ravnos: "x",
  abomination: "A",
  ahrimane: "C",
  akunanse: "c",
  assamiteold: "D",
  assamite_old: "D",
  assamitelegacy: "D",
  assamite_legacy: "D",
  banuhaqimold: "D",
  banuhaqim_old: "D",
  banuhaqimlegacy: "D",
  banuhaqim_legacy: "D",
  banu_haqimold: "D",
  banu_haqim_old: "D",
  banu_haqimlegacy: "D",
  banu_haqim_legacy: "D",
  baali: "E",
  blood_brother: "F",
  bloodbrother: "F",
  bloodbrothers: "F",
  blood_brothers: "F",
  brujah_old: "G",
  brujahold: "G",
  brujah_legacy: "G",
  brujahlegacy: "G",
  "!brujah": "H",
  caitiff: "I",
  daughter: "J",
  daughters: "J",
  daughterofcacophony: "J",
  daughter_of_cacophony: "J",
  daughtersofcacophony: "J",
  daughters_of_cacophony: "J",
  ministryold: "K",
  ministry_old: "K",
  setold: "K",
  set_old: "K",
  followers_of_setold: "K",
  followers_of_set_old: "K",
  followersofsetold: "K",
  followersofset_old: "K",
  ministrylegacy: "K",
  ministry_legacy: "K",
  setlegacy: "K",
  set_legacy: "K",
  followers_of_setlegacy: "K",
  followers_of_set_legacy: "K",
  followersofsetlegacy: "K",
  followersofset_legacy: "K",
  gangrelold: "L",
  gangrel_old: "L",
  gangrellegacy: "L",
  gangrel_legacy: "L",
  "!gangrel": "M",
  gargoyle: "N",
  giovanni: "O",
  guruhi: "P",
  harbinger: "Q",
  harbingers: "Q",
  harbinger_of_skulls: "Q",
  harbingerofskulls: "Q",
  harbingers_of_skulls: "Q",
  harbingersofskulls: "Q",
  ishtarri: "R",
  kiasyd: "S",
  lasombraold: "T",
  lasombra_old: "T",
  lasombralegacy: "T",
  lasombra_legacy: "T",
  la_sombraold: "T",
  la_sombra_old: "T",
  la_sombralegacy: "T",
  la_sombra_legacy: "T",
  malkavianold: "U",
  malkavian_old: "U",
  malkavianlegacy: "U",
  malkavian_legacy: "U",
  "!malkavian": "V",
  nagaraja: "W",
  nosferatuold: "X",
  nosferatu_old: "X",
  nosferatulegacy: "X",
  nosferatu_legacy: "X",
  "!nosferatu": "Y",
  osebo: "Z",
  avenger: "1",
  defender: "2",
  innocent: "3",
  judge: "4",
  martyr: "5",
  redeemer: "6",
  visionary: "7",
};

function replaceToken(token) {
  const tokenText = token.slice(1);
  console.log("replaceToken", token, tokenText, replaceDisc[tokenText]);

  // Try to replace with discipline
  const disc = replaceDisc[tokenText];
  if (disc) return `<span class='krcg-icon'>${disc}</span>`;

  // Try to replace with clans
  const clan = replaceClan[tokenText.toLowerCase()];
  if (clan) return `<span class='krcg-clan'>${clan}</span>`;

  return token;
}

// Convert tokens into spans with krcg icons
function transformIcons(body) {
  return body.replace(/\\!?\w+/g, replaceToken);
}

module.exports = { transformIcons };
